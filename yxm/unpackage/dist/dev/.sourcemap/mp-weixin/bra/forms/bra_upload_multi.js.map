{"version":3,"sources":["webpack:///F:/BraCMS/布拉酒店/uniapp/布拉CMS/bra/forms/bra_upload_multi.vue?2c83","webpack:///F:/BraCMS/布拉酒店/uniapp/布拉CMS/bra/forms/bra_upload_multi.vue?95a9","webpack:///F:/BraCMS/布拉酒店/uniapp/布拉CMS/bra/forms/bra_upload_multi.vue?d43a","webpack:///F:/BraCMS/布拉酒店/uniapp/布拉CMS/bra/forms/bra_upload_multi.vue?9efc","webpack:///F:/BraCMS/布拉酒店/uniapp/布拉CMS/bra/forms/bra_upload_multi.vue","webpack:///F:/BraCMS/布拉酒店/uniapp/布拉CMS/bra/forms/bra_upload_multi.vue?ad69","webpack:///F:/BraCMS/布拉酒店/uniapp/布拉CMS/bra/forms/bra_upload_multi.vue?d7a4"],"names":["props","field_name","type","default","default_value","options","level","name_key","single_column","group","String","unit","mini_type_prop","prop_placeholder","max_amount","Number","show_extra","data","upload","file_ids","form_type","placeholder","params","methods","out_put","arr","console","log","$emit","onOpenPictureTap","e","that","dataset","currentTarget","uni","chooseImage","count","parseInt","success","res","length","show_toast","_","each","tempFilePaths","file","push","filePath","status","$set","uploadImage","upload_file","url","filepath","name","callback","page","showToast","title","icon","duration","extend","formData","header","JSON","parse","isLoginInvalid","code","apply","showModal","content","msg","showCancel","fail","error","complete","hideToast","requestId","uniqueId","uploadFile","onDeleteImgTap","isDeleteAction","index","showActionSheet","itemList","tapIndex","splice","onPreviewTap","previewImage","current","urls","upload_handle","isUploading","bra_service","id","created","key","site_info","bra_action","bra_uuid","getStorageSync","user","__bra_token","auth_str"],"mappings":"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","file":"bra/forms/bra_upload_multi.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./bra_upload_multi.vue?vue&type=template&id=deae7852&\"\nvar renderjs\nimport script from \"./bra_upload_multi.vue?vue&type=script&lang=js&\"\nexport * from \"./bra_upload_multi.vue?vue&type=script&lang=js&\"\nimport style0 from \"./bra_upload_multi.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('deae7852')) {\n      api.createRecord('deae7852', component.options)\n    } else {\n      api.reload('deae7852', component.options)\n    }\n    module.hot.accept(\"./bra_upload_multi.vue?vue&type=template&id=deae7852&\", function () {\n      api.rerender('deae7852', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"F:/BraCMS/布拉酒店/uniapp/布拉CMS/bra/forms/bra_upload_multi.vue\"\nexport default component.exports","export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./bra_upload_multi.vue?vue&type=template&id=deae7852&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./bra_upload_multi.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./bra_upload_multi.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport site_info from '@/bra/site_info'\nimport {_} from 'vue-underscore';\n\nexport default {\n    props: {\n        field_name: {\n            type: '',\n            default() {\n                return [];\n            }\n        },\n        default_value: {\n            default: ''\n        }\n        ,\n        options: {\n            type: '',\n            default() {\n                return [];\n            }\n        },\n        level: {\n            default: 0\n        }\n        ,\n        name_key: {\n            default: 'name'\n        }\n        ,\n        single_column: {\n            type: '',\n            default() {\n                return [];\n            }\n        },\n        group: {\n            type: String,\n            default: ''\n        },\n        unit: {\n            type: String,\n            default: ''\n        },\n        mini_type_prop: {\n            type: String,\n            default: ''\n        },\n        prop_placeholder: {\n            type: String,\n            default: ''\n        },\n\n        max_amount: {\n            type: Number,\n            default: 1\n        },\n        show_extra: {\n            default: false\n\n        }\n    },\n    data: function () {\n        return {\n            upload: [],\n            file_ids: [],\n            form_type: false,\n            placeholder: '' ,\n            params : {},\n        }\n    },\n\n    methods: {\n        out_put: function (arr) {\n            console.log('mhcms out:', arr);\n            this.$emit('updated', arr)\n        },\n        onOpenPictureTap: function (e) {\n            let that = this;\n            const dataset = e.currentTarget.dataset, group = dataset.group, max_amount = dataset.max_amount;\n            uni.chooseImage({\n                count: parseInt(max_amount),\n                success: (res) => {\n                    if (this.upload.length >= max_amount) {\n                        return this.show_toast('对不起,最多上传' + max_amount + \"张图片或文件!\");\n                    } else {\n                        _.each(res.tempFilePaths, file => {\n                            this.upload.push({\n                                filePath: file, status: 0\n                            });\n                        });\n                        that.$set(this, 'upload', this.upload);\n                        this.uploadImage(() => {\n                            console.log(group + 'all files is uploaded');\n                            let arr = [\n                                group, this.file_ids\n                            ];\n                            this.out_put(arr);\n                        });\n                    }\n\n                }\n            });\n        },\n        upload_file: function (url, filepath, name, data, callback, page) {\n\n\n            uni.showToast({title: '上传中...', icon: 'loading', duration: 10000});\n            const options = _.extend( {} ,{\n                url: url, filePath: filepath, name: name, formData: this.params,\n                header: {\n                    'Accept': 'application/json, text/javascript, */*; q=0.01'\n                },\n                success: (res) => {\n                    console.log(res);\n                    res = JSON.parse(res.data);\n                    options.isLoginInvalid = false;\n                    if (res.code == 1) {\n                        callback.apply(page, [res.data, res]);\n                    } else {\n                        uni.showModal({content: res.msg, showCancel: false});\n                    }\n                },\n                fail: (res) => {\n                    console.error(res);\n                    uni.showModal({content: res.msg, showCancel: false});\n                },\n                complete: (res) => {\n                    if (options.isLoginInvalid) {\n                    } else {\n                        uni.hideToast();\n                    }\n                }\n            });\n\n            options.requestId = _.uniqueId(\"RQ\");//生成全局唯一ID \"RQ\" + new Date().getTime();\n            console.log(options);\n            uni.uploadFile(options);\n            return options.requestId;\n        },\n        onDeleteImgTap: function (e) {\n            this.isDeleteAction = true;\n            const dataset = e.currentTarget.dataset, index = dataset.index, group = dataset.group;\n            uni.showActionSheet({\n                itemList: ['删除'],\n                success: (res) => {\n                    if (res.tapIndex === 0) {\n\n                        this.upload.splice(index, 1);\n                        this.file_ids.splice(index, 1);\n                        let arr = [\n                            group, this.file_ids\n                        ];\n                        this.out_put(arr);\n                    }\n                }, complete: () => {\n                    this.isDeleteAction = false;\n                }\n            })\n        },\n        onPreviewTap: function (e) {\n            if (this.isDeleteAction) return;\n            const dataset = e.currentTarget.dataset, index = dataset.index;\n\n            let filePath = '';\n            if(this.upload[index].filePath){\n                filePath = this.upload[index].filePath;\n            }else{\n                filePath = this.upload[index].url;\n            }\n\n            console.log(index);\n            console.log(this.upload);\n            console.log(this.upload[index]);\n            uni.previewImage({\n                current: filePath,\n                urls: [filePath],\n            });\n        },\n        upload_handle: function (index, callback) {\n            const uploadFile = this.upload[index], status = this.upload[index].status;\n            console.log(index , this.upload[index]);\n            if(status == 99){\n                index++;\n                return this.upload_handle(index, function () {\n                    typeof callback == \"function\" && callback()\n                });\n            }\n            this.isUploading = true;\n            this.upload_file(this.bra_service('bra', 'upload', true), uploadFile.filePath, \"file\", {\n\n            }, (res) => {\n                console.log(res);\n                this.upload[index].status = 99;\n                this.upload[index].url = res;\n                this.upload[index].id = res.id;\n                this.file_ids.push(res.id);\n                this.isUploading = false;\n                index++;\n                if (index < this.upload.length) {\n                    this.upload_handle(index);\n                } else {\n                    typeof callback == \"function\" && callback()\n                }\n            });\n        },\n        uploadImage: function (callback) {\n            const isUploading = this.isUploading;\n            if (isUploading) {\n                console.log('file is still uploading  ');\n                return false;\n            } else {\n                console.log('file is still uploading ');\n                this.isUploading = true;\n            }\n\n            this.upload_handle(0, function () {\n                typeof callback == \"function\" && callback()\n            });\n        },\n    },\n    created: function () {\n\n        this.placeholder = this.prop_placeholder;\n\n        if(this.default_value.length > 0){\n\n            for (let key in this.default_value){\n                this.default_value[key].status = 99;\n                this.upload.push(this.default_value[key]);\n                this.file_ids.push(this.default_value[key].id);\n            }\n\n        }\n        let params = site_info;\n        params.bra_action = 'post';\n\n        params.bra_uuid = uni.getStorageSync('bra_uuid');\n        //__bra_token\n        let user = uni.getStorageSync('user') || false;\n        if (user) {\n            params.__bra_token = user.auth_str;\n        }\n        this.params = params;\n        console.log(this.params)\n    }\n}\n","import mod from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./bra_upload_multi.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-1!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\Program Files\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./bra_upload_multi.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}